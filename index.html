<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Les secrets</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-6">

  <!-- Formulaire de connexion et de configuration de l'API -->
  <div id="authSection" class="max-w-4xl mx-auto mb-6">
    <h1 class="text-5xl font-bold mb-6 text-center text-red-600 dark:text-red-900 
               animate-pulse shadow-2xl transform transition-all duration-500">ðŸ‘€ Les secrets ðŸ‘»</h1>

    <!-- Formulaire de connexion -->
    <form id="authForm" class="flex flex-col gap-4 mb-4">
      <input id="apiUrlInput" type="url" placeholder="Entrez l'URL de l'API" class="p-2 border rounded" required />
      <input id="emailInput" type="email" placeholder="Email" class="p-2 border rounded" required />
      <input id="passwordInput" type="password" placeholder="Mot de passe" class="p-2 border rounded" required />
      <label>
        <input type="checkbox" id="saveLogin" class="mr-2"> Enregistrer les informations
      </label>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Se connecter</button>
    </form>
  </div>

  <!-- Container principal pour l'affichage des rapports -->
  <div id="mainContent" class="max-w-4xl mx-auto hidden">
    <form id="reportForm" class="flex gap-4 mb-4">
      <input id="reportIdInput" type="number" min="1" placeholder="Entrer un ID de rapport" class="flex-1 p-2 border rounded" />
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Afficher</button>
    </form>

    <!-- Boutons -->
    <div class="flex gap-4 mb-6">
      <button onclick="fetchAllReports()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
        Tous les rapports
      </button>
      <button onclick="fetchLatestReport()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
        Rapport le plus rÃ©cent
      </button>
      <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
        DÃ©connexion
      </button>
    </div>

    <!-- Spinner de chargement -->
    <div id="loadingSpinner" class="hidden absolute inset-0 flex justify-center items-center bg-gray-500 bg-opacity-50">
      <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-blue-600"></div>
    </div>

    <!-- Container des rapports -->
    <div id="reportsContainer" class="space-y-6"></div>
  </div>

  <script>
const _0x6df4a9=_0x4c5d;(function(_0x29fb1d,_0x2da4ba){const _0x1c4d21=_0x4c5d,_0x39a056=_0x29fb1d();while(!![]){try{const _0x493803=-parseInt(_0x1c4d21(0xaa))/0x1*(-parseInt(_0x1c4d21(0xaf))/0x2)+parseInt(_0x1c4d21(0x8f))/0x3+-parseInt(_0x1c4d21(0x93))/0x4*(parseInt(_0x1c4d21(0xa8))/0x5)+-parseInt(_0x1c4d21(0xb2))/0x6*(-parseInt(_0x1c4d21(0x9d))/0x7)+-parseInt(_0x1c4d21(0x91))/0x8+parseInt(_0x1c4d21(0xa0))/0x9+parseInt(_0x1c4d21(0xbf))/0xa*(parseInt(_0x1c4d21(0x9e))/0xb);if(_0x493803===_0x2da4ba)break;else _0x39a056['push'](_0x39a056['shift']());}catch(_0x451036){_0x39a056['push'](_0x39a056['shift']());}}}(_0x41c9,0xa540e));function _0x41c9(){const _0x3fd51e=['application/json','getElementById','stringify','Erreur\x20de\x20connexion','apiUrl','submit','saveLogin','7DGbjYS','11nzlNyj','projet','1460700lyUAGk','Nom','createdAt','reportsContainer','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>','innerHTML','reportIdInput','setItem','3295NSWsiv','/api/get-reporting/','25774gpJKbU','loadingSpinner','email','</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20mb-1\x22>CrÃ©Ã©\x20Ã :\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-white\x20p-6\x20rounded\x20shadow\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-xl\x20font-bold\x20mb-2\x22>Rapport\x20ID:\x20','54ixPuIX','json','authSection','194646XTwnXd','Bearer\x20','preventDefault','hidden','<p\x20class=\x22text-red-600\x22>Aucun\x20rapport\x20trouvÃ©.</p>','password','value','floor','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prose\x20max-w-none\x22>','authToken','/api/auth/local','remove','classList','12511220cwXRbf','mainContent','reportForm','Descriptions','add','apiUrlInput','jwt','3087294TpzMQY','addEventListener','10546600iDPIMc','removeItem','7136hbJXrz','toLocaleString','getItem'];_0x41c9=function(){return _0x3fd51e;};return _0x41c9();}let apiUrl='',authToken='';const authSection=document[_0x6df4a9(0x97)](_0x6df4a9(0xb1)),mainContent=document[_0x6df4a9(0x97)](_0x6df4a9(0xc0)),storedApiUrl=localStorage[_0x6df4a9(0x95)]('apiUrl'),storedEmail=localStorage[_0x6df4a9(0x95)](_0x6df4a9(0xac)),storedPassword=localStorage[_0x6df4a9(0x95)](_0x6df4a9(0xb7)),storedToken=localStorage[_0x6df4a9(0x95)](_0x6df4a9(0xbb));function _0x4c5d(_0x1ee89a,_0x306962){const _0x41c916=_0x41c9();return _0x4c5d=function(_0x4c5db9,_0x1ae10d){_0x4c5db9=_0x4c5db9-0x8e;let _0x433ef6=_0x41c916[_0x4c5db9];return _0x433ef6;},_0x4c5d(_0x1ee89a,_0x306962);}storedApiUrl&&storedEmail&&storedPassword&&storedToken&&(apiUrl=storedApiUrl,authToken=storedToken,authSection['classList'][_0x6df4a9(0xc3)](_0x6df4a9(0xb5)),mainContent[_0x6df4a9(0xbe)][_0x6df4a9(0xbd)]('hidden'));document[_0x6df4a9(0x97)]('authForm')[_0x6df4a9(0x90)]('submit',async _0x3c6edd=>{const _0x15e5c8=_0x6df4a9;_0x3c6edd['preventDefault'](),apiUrl=document[_0x15e5c8(0x97)](_0x15e5c8(0xc4))[_0x15e5c8(0xb8)];const _0x459655=document[_0x15e5c8(0x97)]('emailInput')['value'],_0x266f52=document[_0x15e5c8(0x97)]('passwordInput')['value'],_0x550fb8=document['getElementById'](_0x15e5c8(0x9c))['checked'];try{const _0x1ec154=await fetch(apiUrl+_0x15e5c8(0xbc),{'method':'POST','headers':{'Content-Type':_0x15e5c8(0x96)},'body':JSON[_0x15e5c8(0x98)]({'identifier':_0x459655,'password':_0x266f52})}),_0xfcab0c=await _0x1ec154['json']();_0x1ec154['ok']?(authToken=_0xfcab0c[_0x15e5c8(0x8e)],_0x550fb8&&(localStorage[_0x15e5c8(0xa7)](_0x15e5c8(0x9a),apiUrl),localStorage['setItem'](_0x15e5c8(0xac),_0x459655),localStorage[_0x15e5c8(0xa7)](_0x15e5c8(0xb7),_0x266f52),localStorage[_0x15e5c8(0xa7)]('authToken',authToken)),authSection[_0x15e5c8(0xbe)][_0x15e5c8(0xc3)]('hidden'),mainContent[_0x15e5c8(0xbe)]['remove'](_0x15e5c8(0xb5))):alert(_0x15e5c8(0x99));}catch(_0x19328f){alert(_0x15e5c8(0x99));}});function logout(){const _0x1e1da7=_0x6df4a9;localStorage['removeItem'](_0x1e1da7(0x9a)),localStorage[_0x1e1da7(0x92)](_0x1e1da7(0xac)),localStorage['removeItem']('password'),localStorage[_0x1e1da7(0x92)](_0x1e1da7(0xbb)),authSection[_0x1e1da7(0xbe)]['remove'](_0x1e1da7(0xb5)),mainContent[_0x1e1da7(0xbe)]['add'](_0x1e1da7(0xb5));}async function fetchReport(_0x414382){const _0x1799e1=_0x6df4a9;try{const _0x2d881a=await fetch(apiUrl+_0x1799e1(0xa9)+_0x414382,{'headers':{'Authorization':_0x1799e1(0xb3)+authToken,'Accept':_0x1799e1(0x96)}});if(!_0x2d881a['ok'])throw new Error('Not\x20found');return await _0x2d881a[_0x1799e1(0xb0)]();}catch{return null;}}function displayReport(_0x1be352){const _0x2ce461=_0x6df4a9,_0x37253f=document[_0x2ce461(0x97)](_0x2ce461(0xa3)),_0x327002=_0x2ce461(0xae)+_0x1be352['id']+_0x2ce461(0xad)+new Date(_0x1be352[_0x2ce461(0xa2)])[_0x2ce461(0x94)]()+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-500\x20mb-4\x22>Projet:\x20'+(_0x1be352[_0x2ce461(0x9f)]?.[_0x2ce461(0xa1)]??'Inconnu')+_0x2ce461(0xba)+_0x1be352[_0x2ce461(0xc2)]+_0x2ce461(0xa4);_0x37253f[_0x2ce461(0xa5)]+=_0x327002;}async function fetchLatestReport(){const _0x2fb64a=_0x6df4a9,_0x3b194c=document['getElementById'](_0x2fb64a(0xa3)),_0x528fe8=document[_0x2fb64a(0x97)]('loadingSpinner');_0x528fe8[_0x2fb64a(0xbe)][_0x2fb64a(0xbd)](_0x2fb64a(0xb5));let _0x442952=0x1,_0x2365dc=0x2710,_0x5301e6=null;while(_0x442952<=_0x2365dc){const _0x3a0991=Math['floor']((_0x442952+_0x2365dc)/0x2),_0x10546b=await fetchReport(_0x3a0991);_0x10546b?(_0x5301e6=_0x10546b,_0x442952=_0x3a0991+0x1):_0x2365dc=_0x3a0991-0x1,await new Promise(_0x4b41d6=>setTimeout(_0x4b41d6,0x32));}_0x528fe8[_0x2fb64a(0xbe)][_0x2fb64a(0xc3)](_0x2fb64a(0xb5)),_0x5301e6?(_0x3b194c[_0x2fb64a(0xa5)]='',displayReport(_0x5301e6)):_0x3b194c[_0x2fb64a(0xa5)]=_0x2fb64a(0xb6);}async function fetchAllReports(){const _0x2875af=_0x6df4a9,_0x4c7ced=document[_0x2875af(0x97)]('reportsContainer'),_0xdefc88=document[_0x2875af(0x97)](_0x2875af(0xab));_0xdefc88[_0x2875af(0xbe)][_0x2875af(0xbd)](_0x2875af(0xb5));let _0x173c37=0x1,_0x4c4cc4=0x2710,_0x3edcfa;_0x4c7ced[_0x2875af(0xa5)]='';let _0x295ab5=null;while(_0x173c37<=_0x4c4cc4){const _0x482357=Math[_0x2875af(0xb9)]((_0x173c37+_0x4c4cc4)/0x2),_0x276772=await fetchReport(_0x482357);_0x276772?(_0x295ab5=_0x276772,_0x173c37=_0x482357+0x1):_0x4c4cc4=_0x482357-0x1,await new Promise(_0x251b38=>setTimeout(_0x251b38,0x1f4));}if(_0x295ab5){let _0x1bf303=_0x295ab5['id'];while(_0x1bf303>=0x1){const _0x4dc995=await fetchReport(_0x1bf303);if(_0x4dc995)displayReport(_0x4dc995);_0x1bf303--,await new Promise(_0x1fcc0b=>setTimeout(_0x1fcc0b,0x1f4));}}_0xdefc88['classList'][_0x2875af(0xc3)](_0x2875af(0xb5));}document['getElementById'](_0x6df4a9(0xc1))[_0x6df4a9(0x90)](_0x6df4a9(0x9b),async _0x1bb05=>{const _0x4b6858=_0x6df4a9;_0x1bb05[_0x4b6858(0xb4)]();const _0x3a4b38=parseInt(document[_0x4b6858(0x97)](_0x4b6858(0xa6))[_0x4b6858(0xb8)]);await fetchReport(_0x3a4b38);});
  </script>

</body>

</html>
